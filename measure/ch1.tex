\documentclass[main.tex]{subfiles}
\usepackage{tikz-cd}
\begin{document}
\chapter{Measure Theory and Integration} 
\section{Measuring Sets}

First we define a rudimentary "\emph{measure}" for a rectangle. Then, by means of cube coverings of sets, we define a rudimentary measure for arbitrary sets in $\RR^d$, called the \emph{outer measure}, and results that follow, reg. open sets etc. leads us to define a restriction on the \emph{outer measure}, and this gives us the \emph{Lebesgue Measure}.

\subsection{Primitive Measurement of Rectangles}
\defn{Rectangle (Open) in $\RR^d$}{$$R:=\Pi_{i=1}^d (a_i,b_i)$$}
\defn{Rectangle (Closed) in $\RR^d$}{$$\overline{R}=\Pi_{i=1}^d [a_i,b_i]$$}
\defn{Almost disjoint collection of rectangles $\{R_i\}$}{A collection of rectangles $\{R_i\}$ is said to be \emph{almost disjoint} if ${R_i}^{\circ}\cap{R_j}^{\circ}=\varnothing$ for all $i,j \in \NN$.}
\defn{Volume of a rectangle (both closed and open)}{$$|R|=\overline{R}:= \Pi_{i=1}^d |b_i-a_i| $$}

\lemp{If $R \subset \RR^d$ is a rectangle, and $\{R_i\}_{i=1}^N$ is a collection of almost disjoint rectangles such that $R=\cup_{i=1}^N R_i$, then $|R|=\sum_{i=1}^N |R_i$}{Let $R=\Pi_{i=1}^d[a_i,b_i]$ and subdivide each $[a_i,b_i]$ into $t_{i0}=a_i<t_{i1}<t_{i2}<\cdots <t_{i{N-1}}< b_i=t_{iN}$ where $[t_{ik},t_{i{k+1}}]$ is the interval that forms the $i-th$ coordinate of \emph{some} rectangle $R_q$ in our collection. Let $L_kj$ represent the $j-th$ subdivision interval of the $k-th$ interval of $R$. All possible products taken of $L_{kj}$, call it $R_{pq}$ yields a division of $R$ into smaller rectangles, and by virtue of the definition of $|R|$, this is equal to $\sum_{p,q}|R_{pq}|$. In noting that each $R_i$ can in the same sense be subdivided, and is eventually covered exactly by a subcollection of $R_{pq}$ and that each $R_i$ is robustly covered so, we have that $|R_i|=\sum_{q} |R_{pq}|$, which would yield $|R|=\sum |R_i|$.   }
A corollary of this is:
\begin{remark}
    If $R=\cup_{i=1}^N R_i$ for rectangles $R_i$ (where $R$ itself is a rectangle), then $$|R| \leq \sum |R_i| $$
\end{remark}

\lemp{(Dyadic Rationals are Dense in $\RR$ and $\RR^d$) The set $$T=\{\frac{1}{2^k}(m_1,m_2,\cdots,m_d):k \in \NN, m_1,m_2 \cdots m_d \in \ZZ \}$$ is dense in $\RR^d$}{Let $\vec{x}=(x_1,x_2 \cdots x_d) \in \RR^d$, and let $\varepsilon>0$. Choose a cube $\pi_{i=1}^d [p_i,p_i+e]$ that is sitting inside $B_{\varepsilon}(x)$. Let $a_j$ be the smallest distance between $x_j$ and the endpoints of the $j-th$ interval of the cube. Let $a=\inf(a_j)$. Now choose $k \in \NN$ such that $2^k (a)>2$, and choose $m_j$ such that $2^k (p_j)<m_j<2^kp_j +2^k e$, which yields a point $\frac{1}{2^k}(m_1,m_2,\cdots m_d)$ in this cube, in this ball. Hence, dense. }

\thmp{(Open sets are approximately a bunch of cubes) Let $\OO \subseteq \RR^d$, then there exists $\{Q_i\}_{i=1}^{\infty}$, a countable collection of almost disjoint closed cubes such that $$\OO=\cup_{i=1}^{\infty} Q_i $$ }{Subdivide $\RR^d$ into almost disjoint 1-cubes, making a grid of 1-cubes. Let $A_0$ be the set of all grid cubes that fall inside $\OO$, and let $T_0$ be the set of all grid cubes that fall both inside and outside $\OO$. In step 2, subdivide the cubes in $T_0$ into halves, and let $A_1$ be the set of all cubes obtained such that they are fully in $\OO$, and let $T_1$ be the set of all cubes such that they fall both in and out of $\OO$. Keep going as such, subdividing in each step by half. Take all $A_1,A_2 \cdots$ and union all sets in all of them. This is denoted by $\cup_{i=1}^{\infty} Q_i$ which is obviously contained in $\OO$. Now let $x\in \OO$. $x \in B_{r}(x) \subseteq \OO$. Choose a cube inside this, do the same procedure as above proof, and get an $a$ as the above proof (by taking $Q=\Pi_{g=1}^d [p_g,p_g+e]$ and setting $a=\inf(a_j)$ where $a_j$ is the shortest distance between $x_j$ and the $j-th$ interval's endpoints). Choose $k$ large enough such that $2^k a>2$ and choose two integers $m_j$ and $m_j+1$ in between $2^k p_j<m_j<m_j+1<2^k p_j +2^k e$. Now take the product $\Pi_{j=1}^d [m_j/2^k, (m_j+1)/2^k]$, which would end up being a cube in some $A_i$ (accepted cubes), implying $\OO \subseteq \cup_{i=1}^{\infty} Q_i$. Hence $$ \OO=\cup_{i=1}^{\infty} Q_i $$ }

\subsection{Primitive Measurement of \emph{Sets}- The Outer Measure}
Now we define, equipped with our primitive notion of a measure for a rectangle, what it means to \emph{measure a set}. 
\defn{Outer Measure $M_*$}{Let $E \subseteq \RR^d$. $$M_*(E):=\inf\{\sum_{i=1}^{\infty}|Q_i|: \{Q_i\}\text{ is a cube covering of }E \} $$
\begin{remark} This definition is intuitive because it takes into account all possible cube coverings, and finds the smallest such in the sense of "measurement". The name "outer measure" encompasses the fact that we are approximating the set $E$ by coverings of $E$, essentially from the outside rather than the inside.  \end{remark}}

\thmp{Let $M^R_*(E):=\inf\{\sum_{i=1}^{\infty}|R_i|: \{R_i\}\text{ a collection of rectangles covering }E\}$ and $M^C_*(E):=\inf\{\sum_{i=1}^{\infty}|Q_i|: \text{ where }\{R_i\}\text{ is a collection of cubes covering }E\}$. Then: 
$$M^R_{*}=M^C_* $$}{It is immediately obvious that any cube covering is a rectangle covering, implying that $M^R_*\leq M^C_*$.
For the other direction, we start with a rectangle covering $\{R_i\}$ of $E$, and then slightly extend these rectangles, by some $\delta$ such that the extended rectangles have side length ratios to be rational (This can be done, as the next throwaway result suggests), and their volumes $|S_j|\leq |R_j|+\varepsilon/2^j $. Once this is done, We can subdivide $|SS_j|$ into smaller closed, almost disjoint, finite cubes $S_j=\cup_{i=1}^{N_j} Q_{ij}$ and conclude that $\sum |Q_{ij}|=|S_j|$ and eventually say that $\{Q_{ij}\}$ is a covering of $E$ such that $\sum|Q_{ij}| \leq \sum |R_k|+\varepsilon$. \\\\ So to conclude, given a rectangle covering $\{R_i\}$, for every $\varepsilon>0$ we have a cube covering $\{Q_i\}$ such that $$\sum|Q_{ij}|\leq \sum|R_j|+\varepsilon$$ which means that $$M^C_* \leq M^R_* $$ which concludes the proof. 
}
\lemp{\textbf{(throwaway)} Given a rectangle $R$, and an $\varepsilon>0$, there exists a larger rectangle $R \subset R'$ such that $|R'| \leq |R|+\varepsilon$ and the side-side ratios of $|R'|$ are rational, or rather, we can have $R'$ to be equal to the union of a finite number of almost disjoint closed cubes $Q_i$.}{DRAG (WORK IN PROGRESS)}

\thmp{\begin{enumerate}
    \item Outer measure of a closed cube $Q$ is $|Q|$
    \item Outer measure of an open cube $Q$ is $|Q|$
    \item Outer measure of a closed rectangle $R$ is $|R|$
    \item Outer measure of an open rectangle $R$ is $|R|$
\end{enumerate}}{1. Let $Q$ being a closed cube covers itself, therefore $M_*(Q)\leq |Q|$. Consider any cube covering $Q \subseteq \cup_i Q_i$ of $Q$. Let $S_j$ be a slightly larger open cube than $Q_j$ such that $|S_j|\leq |Q_j|(1+\varepsilon)$. $\{S_j\}$ covers $Q$, and hence a finite subcovering $\{S_i\}_{i=1}^N$ covers $Q$, which means $|Q| \leq \sum_{i=1}^N|S_j| \leq (1+\varepsilon)\sum_{i=1}^{N}|Q_i|\leq (1+\varepsilon)(\sum_{i=1}^{\infty} |Q_i|) $ which gives us that for every $\varepsilon$ and a covering $Q_i$, we have $|Q|\leq \sum_i |Q_i| (1+\varepsilon)$ which proves our result.
\\\\ 2. Let $Q$ be open. $\overline{Q}$ covers $Q$, implying $M_*(Q) \leq |\overline{Q}|=|Q|$. Let $Q_0$ be any closed set inside $Q$. We have $M*(Q_0)=|Q_0| \leq M*(Q)$ from the fact that $M*$ is monotonic (under the inclusion relation). Since we can make $|Q_0|$ go arbitrarily close to $|Q|$, we have that $|Q| \leq M_*(Q)$, which proves (2).
\\\\ (3) and (4) for rectangles follow similarly.  }

\lemp{\textbf{(Two light lemmas)} 
\\\begin{enumerate}
\item If $E_1 \subseteq E_2$ then $M_*(E_1) \leq M_*(E_2)$
\item Given $\varepsilon>0$, there exists a covering $\{Q_i\}$ of $E$ such that $\sum_{i=1}^{\infty} |Q_i| \leq M_*(E)+\varepsilon$
\end{enumerate}}{$E_1\subseteq E_2 \implies $ any covering of $E_2$ is a covering for $E_1$, which ultimately gives us (1).
\\\\ (2) follows from the definition. }
\thmp{\textbf{(Countable sub-additivity of outer measure)} Let $E=\cup_{i=1}^{\infty} E_i$. Then $M_*(E)\leq \sum_{i=1}^{\infty}M_*(E_i)$}{Let $\{Q_{i,j}\}_{i=1}^{\infty}$ be a closed almost disjoint cube covering for $E_j$ such that $\sum_{j=1}^{\infty}|Q_{ij}|\leq m_*(E_j)+\varepsilon/2^j$. $\{Q_{ij}:i,j \in \NN\}$ is a covering for $E$ implying $m_*(E)\leq \sum_{i=1}^{\infty}\sum_{j=1}^{\infty}|Q_{ij}| \leq \sum_{j=1}^{\infty}m_*(E_j)+\varepsilon$ which implies that $m_*(E)\leq \sum_{i=1}^{\infty} m_*(E_j)$ }

\thmp{\textbf{(Open Set criteria)} $$m_*(E)=\inf(P)=\inf\{m_*(\OO):\OO \text{ open and }E \subseteq \OO\}$$}{From monotonicity, it is clear that $M_*(E)\leq\inf(P)$. Let $\{Q_i\}$ be such that $\sum_{i=1}^{\infty} \leq M_*(E)+\varepsilon/2$ and for each $Q_i$ find open cube $S_i$ so that $|S_i|\leq |Q_i|+\varepsilon/2^{i+1}$. Then $\sum_i |S_i| \leq \sum_i |Q_i| +\varepsilon/2$. Note that $\{S_i\}$ is an open cover for $E$, so let $O=\cup_i S_i$. We have $M_*(O) \leq \sum_{i}|S_i| \leq M_*(E)+\varepsilon$. We are done.   }
\thmp{If $E=E_1 \cup E_2$ with $d(E_1,E_2)>0$ and $E_1 \cap E_2=\varnothing$, then $M_*(E)=M_*(E_1)+M_*(E_2)$}{From countable additivity we have $m_*(E)\leq m_*(E_1)+m_*(E_2)$. For the other direction, take an open covering $\{Q_i\}$ for $E$ such that $\sum_i |Q_i| \leq m_*(E)+\varepsilon$. We subdivide each $Q_i$ into $Q_{ij}$ (a finite number of them for each i) such that each cube is of side length less than $d(E_1,E_2)$. This means that a subcollection of $Q_{ij}$ covers $E_1$, and another, disjoint subcollection covers $E_2$, which means that $m_*(E_1)+m_*(E_2)\leq \sum_{ij} |Q_ij|\leq m_*(E)+\varepsilon$. We are done. 

}
\lemp{If $E_1,E_2 \cdots E_k$ are disjoint sets such that $d(E_i,E_j)>0$ for all i and j, then $m_*(\cup_{i=1}^kE_i)=\sum_{i=1}^km_*(E_i)$}{Induction}

\thmp{If $E=\cup_{i=1}^{\infty}Q_i$ for almost disjoint closed cubes, then $m_*(E)=\sum_i |Q_i|$}{From subadditivity we have $m_*(E) \leq \sum_i |Q_i|$. We construct $S_j\subset Q_j$ slightly smaller than $Q_j$, i.e, $|Q_j|\leq|S_j|+\varepsilon/2^j$. These $S_j$ are all disjoint, and their distance from each other are all positive. For any $n \in \NN$, we have $\cup_{i=1}^n S_i \subseteq E$, which gives $\sum_{i=1}^n |S_i| \leq m_*(E)$. This gives $\sum_{i=1}^n |Q_i| \leq m_*(E)+\sum_{i=1}^n\varepsilon/2^i$, which, in the limit, yields our desired result. }
\subsection{The Lebesgue Measure}
\defn{Lebesgue Measurable Set}{A set $E \subseteq \RR^d$ is said to be Lebesgue measurable if for every $\varepsilon>0$, there exists an open set $O$ such that $E \subseteq O$ and $m_*(O-E)<\varepsilon$
\\\\ If $E$ is lebesgue measurable, then its measure is defined as $$\text{Lebesgue measure}=m(E)=m_*(E)$$}
\lemp{Every open set is lebesgue measurable.}{Trivial}
\lemp{Every set $E$ such that $m_*(E)=0$ is lebesgue measurable (and are called \emph{\textbf{measure zero sets}}).}{If $m_*(E)=0$, then for an $\varepsilon>0$, there exists an open set $O$ such that $E \subset O$ and $m_*(O)\leq \varepsilon$, but $O-E$ is a subset of $O$, which gives us the desired result.}
\thmp{Countable union of measurable sets are measurable.}{Let $E=\cup_i E_i$ where each $E_i$ are measurable. For $E_i$, take an open set $E_i \subseteq O_i$ such that $m_*(O_i-E_i)\leq \varepsilon/2^i$. Consider $(\cup_i O_i) -(\cup_i E_i) \subseteq \cup_i (O_i-E_i)$ which gives $m_*((\cup_i O_i) -(\cup_i E_i))\leq \sum_i (m_*(O_i-E_i))\leq \varepsilon$ which yields us the result.}

\lemp{If $F$ is closed and $K$ is compact, with $F \cap K =\varnothing$ then $d(F,K)>0$.}{If $d(F,K)>0$, then there exists sequences $x_n \in F$ and $y_n \in K$ such that $d(x_n,y_n)\to 0$. Since $y_n$ is in $K$, from heine borel we have $y_{n_k}\to y \in K$ for some subsequence $y_{n_k}$. This means that $x_{n_k} \to y$, but $F$ being closed gives us $y \in F$, a contradiction. }

\lemp{In $\RR^d$, any closed set $F$ is a countable union of compact sets.}{Let $B_{i}[0]$ be an increasing sequence of compact balls. $F=\cup_i F \cap B_{i}[0]$. Closed subsets of compact sets are compact, so we are done.}

\thmp{Compact sets in $\RR^d$ are measurable.}{Let $\varepsilon>0$ and $O$ be such that $m_*(O)\leq m_*(E)+\varepsilon$. $O-E$ is actually an open set, so $O-E= \cup_i Q_i$ for a collection (countable) of almost disjoint closed cubes. Let $S_j \subset Q_j$ such that $|Q_j|\leq |S_j|+\varepsilon/2^j$. Note that, since $S_j$ are closed, they are compact and disjoint from other $S_i$. For $n \in \NN$, we have $E\cup_{i=1}^n S_i \subseteq O$, or $m_*(E \cup_{i=1}^n S_i)=m_*(E)+\sum_{i=1}^n|S_i|\leq m_*(O) \implies m_*(E)+\sum_{i=1}^n |Q_i| \leq m_*(O)+\sum_{i=1}^n \varepsilon/2^i $. Taking the n limit yields $$m_*(E)+\sum_{i=1}^{\infty} |Q_i|=m_*(E)+m_*(O-E) \leq m_*(O)+\varepsilon $$ or $m_*(E)+m_*(O-E)\leq (\text{ or even }=) m_*(O)$. This tells us that $m_*(O-E)\leq \varepsilon$. Hence $E$ is measurable. }

\begin{remark}
    Since compact sets are measurable, and closed sets are a countable union of compact sets, closed sets are also measurable. Thus far, our collection of measurable sets are those that are open, closed, and a countable union of those that are already measurable. 
\end{remark}

\thmp{Complement of a measurable set is measurable.}{Let $E$ be measurable. Let $O_n$ be such that $m_*(O_n-E)\leq 1/n$. Consider $E\subseteq \cap_i O_i$, or $\cup_i O_i^c \subseteq E^c$. We have $m_*(E^c-\cup_i O_i^c)=m_*(\cap_i O_i-E)\leq 1/n$ for all $n$, which means $E^c-\cup_i O_i^c=J$ is a measure 0 set, hence measurable. $J\subseteq E^c$, and $J \cup_i(O_i^c)=E^c$, implying that $E^c$ is a uniton of two measurable sets, hence itself is measurable. }

\lemp{Countable intersection of measurable sets is measurable.}{$\cap_{i} E_i = (\cup_i E^c_i)^c$.}

\begin{remark}
    Thus far, we have open sets and closed sets to be measurable, as are countable unions, intersections and complements of measurable sets. 
\end{remark}

\thmp{\textbf{(Countable additivity)} Let $E=\cup_i E_i$ for measurable, disjoint sets $\{E_i\}$. Then, $$m(E)=\sum_{i=1}^{\infty} m(E_i) $$}{One direction $m(E)\leq \sum_{i=1}^{\infty} m(E_i)$ is trivial from subadditivity. 
\\ \textbf{\emph{Assume that each $E_i$ are bounded}}
\\ Consider $E_i^C$, which are measurable, and find $O_i$ such that $m_*(O_i-E_i)\leq \varepsilon/2^i$. Let $F_i=O_i^C$ be closed sets such that $F_i \subset E_i$ and $m_*(E_i-F_i)=m_*(O_i-E_i^c)\leq \varepsilon/2^i$. for every $n$, $\cup_{i=1}^n F_i \subseteq E$, implying $m_*(\cup_{i=1}^n F_i)\leq m_*(E)$ which gives (since $F_i$ are closed and bounded, and disjoint with each other) $\sum_{i=1}^n m_*(F_i) \leq m_*(E)$. Also, $E_i=E_i-F_i \cup F_i$ implying that $m_*(E_i)\leq m_*(E_i-F_i)+m_*(F_i)\leq \varepsilon/2^i +m_*(F_i)$, which means $\sum_{i=1}^n m_*(E_i)\leq \sum_{i=1}^n m_*(F_i)+\sum_{i=1}^n \varepsilon/2^i $. In the limit we have $$\sum_{i=1}^{\infty} m_*(E_i)\leq \sum_{i=1}^{\infty} m_*(F_i)+\varepsilon\leq m_*(E)+\varepsilon $$ which concludes the result for the case where each $E_i$ are bounded.
\\\\ Suppose they are not bounded. Consider $Q_1 \subset Q_2 \cdots $ a sequence of increasing cubes converging to $\RR^d$ centered at origin. Let $S_1=Q_1$, $S_2=Q_2-Q_1$, $S_n=Q_n-Q_{n-1}$ and so on. These $S_i$ are disjoint, bounded, and measurable sets. Define $E_{jk}=E_j \cap S_k$. These too, are each measurable, and bounded. $E_j=E_j \cap (\cup_k S_k)=\cup_k E_{jk}$ implying from the previous proof that $m_*(E_j)=\sum_k m_*(E_{jk})$. We know also that $E_{jk}$ are disjoint, bounded, measurable and its union equals $E$. So $m_*(E)=\sum_j (\sum_k m_*(E_{jk}))=\sum_j (m_*(E_j))$}

\thmp{\textbf{(Limit Exchange)} \begin{enumerate}
\item Let $E_1 \subseteq E_2 \cdots $ be an increasing sequence of measurable sets. Then $m(\cup_i E_i)=\lim_{n \to \infty} m(E_n)$.
\item Let $F_{n+1} \subseteq F_n\cdots F_3\subseteq F_2 \subseteq F_1$ be a decreasing sequence of measurable sets such that $m(F_1)<\infty$. Then $m(\cup_i F_i)=\lim_{n \to \infty} m(F_n)$ 
\end{enumerate}}{(1) Define $Q_1=E_1$, $Q_2=E_2-E_1$, $Q_3=E_3-E_2$ and so on. These are disjoint measurable sets. $m(\cup_{i=1}^{\infty})=m(\cup_{i=1}^{\infty}E_i)=\sum_{i=1}^{\infty}m(Q_i)=\lim_{n \to \infty} \sum_{i=1}^n m(Q_i)=\lim_{n \to \infty} m(E_n)$ (since $m(Q_i)=m(E_i-E_{i-1})=m(E_i)-m(E_{i-1})$).
\\\\ For (2), we consider $F_1-F_1 \subset F_1-F_2 \cdots $ an increasing sequence of measurable sets. We then have $m(\cup_i(F_1-F_i))=\lim_{n \to \infty} m(F_1-F_i)=m(F_1)-\lim m(F_i)$. This immediately gives us the result.  }
\thmp{Let $E$ be a measurable set, and $\varepsilon>0$. Then, 
\begin{enumerate}
    \item $\exists$ an open set $O$ such that $E \subset O$ and $m(O-E)\leq \varepsilon$
    \item $\exists $ closed set $F$ such that $F \subset E$ and $m(E-F)\leq \varepsilon$
    \item if $m(E)<\infty$, then there exists a compact set $K\subset E$ such that $m(E-K)\leq \varepsilon$
    \item if $m(E)<\infty$, then there exists $F=\cup_{i=1}^N Q_i$, a union of almost disjoint closed sets, such that $m(E-F)+m(F-E)<\varepsilon$
\end{enumerate}}{(1) Obvious from the definition of measurability.
\\\\ (2) Apply definition of measurability for $E^c$ to get an open set $E^c\subseteq F^c$ such that $m(F^c-E^c)=m(E-F)\leq \varepsilon$. The requisite closed set is $F$.
\\\\ (3) Let $F$ be such that $m(E-F)<\varepsilon/2$ where $F$ is a closed set. Consider $Q_1 \subset Q_2 \subset Q_3 \cdots$. $F=\cup_i F \cap Q_i$ where each $F \cap Q_i$ are compact. $F$ is contained in $E$, implying $m(F)=\lim_{n\to \infty}m(F \cap Q_i)<\infty$ so the limit exists. For large enough $N$, we have $m(F)-m(F \cap Q_N)<\varepsilon/2$. We then have $m(E)-m(F)+m(F)-m(F \cap Q_N)=m(E-F)+m(F)-m(F \cap Q_N)=m(E-F\cap Q_N) \leq \varepsilon$.
\\\\ (4) Let $m(E)<\infty$. There exists almost dijoint closed cubes $Q_i$ such that $\sum_{i=1}^{\infty}|Q_i|\leq m(E)+\varepsilon/2$. This series converges, so we take that $N$ such that $\sum_{i=N+1}^{\infty}|Q_i| < \varepsilon/2$, and define $F=\cup_{i=1}^N Q_i$. Note that $E-F$ is fully contained in $\cup_{i=N+1}^{\infty}Q_i$, so $m(E-F)$ is bounded by $\varepsilon/2$. Note that $F-E=\cup_{i=1}^N Q_i-E \subset \cup_{i=1}^{\infty} Q_i-E$, which means that $m(F-E)\leq m(\cup_i Q_i -E) \leq \varepsilon/2$, therefore, the sum $m(E\triangle F)=m(E-F \cup F-E)=m(E-F)+m(F-E)\leq \varepsilon$}
\subsubsection{Invariance properties of the Lebesgue Measure}
\defn{$E+h$ translate, $h \in \RR^d$}{$$E+h:=\{x+h:x\in E\}$$}
\defn{$\delta E$ dialation, $\delta \in \RR$}{$$\delta E:=\{\delta x : x \in E\}$$}

\thmp{If $Q$ is a cube, $Q+h$ is also a cube, and $|Q|=|Q+h|$}{Trivial definition chasing.}
\thmp{If $B$ is a ball, then $B+h$ is also a ball, of the same radius. Moreover, $B_r(x)+h=B_r(x+h)$}{Also trivial}
\thmp{If $O$ is an open set, so is $O+h$, and their measures are the same}{First show that if $O$ is a union of balls $B_i$ thn $O+h$ is a union of balls $B_i+h$. Moreover, if $O$ is a disjoint (almost) union of closed cubes $\cup_i Q_i$, then $O+h=\cup_i (Q_i+h)$. We then can easily see that their measures are the same from additivity. }

\thmp{$m_*(E)=m_*(E+h)$}{Given any open set $O$ covering $E$, there exists an open set $O+h$ covering $E+h$, with the same measures. The reverse direction too is possible. So $\inf\{m_*(O):E \subset O\}=\inf\{m_*(O'):E+h \subseteq O'+h\}$ which concludes equality.}

\thmp{If $E$ is measurable, so is $E+h$ and their measures are the same.}{Given $\varepsilon>0$, there exists $E \subset O$ open such that $m_*(O-E)\leq \varepsilon$. Consider $O+h$, which covers $E+h$. Note that $(O+h-E+h) \subseteq (O-E)+h$ so $m_*(O+h-E+h)\leq \varepsilon$. We are done with measurability, and equality comes from $m_*$. }
Using similar techniques, one can show:
\begin{theorem}
    $m(\delta E)=\delta ^d m(E)$
\end{theorem}
\subsection{Sigma Algebras}
\defn{Sigma algebra $\Sigma(\Omega)$ of a set $\Omega$}{A collection of subsets $\Sigma(\Omega)$ of $\Omega$ is a sigma algebra if:
\begin{enumerate}
    \item $\varnothing , \Omega \in \Sigma$
    \item $E_1,E_2 \cdots  \in \Sigma \implies \cup_i E_i \in \Sigma$
    \item $E \in \Sigma \implies E^c \in \Sigma$
\end{enumerate}}

\defn{Borel Sigma Algebra}{Let $K$ be the collection of all open sets (in any topology), then the Borel Sigma Algebra, denoted $\BB_{\Omega}$ is the intersection of all sigma algebras containing $K$}
\begin{remark}
    The set of all lebesgue measurable subsets of $\RR^d$ forms a sigma algebra. Since open sets are measurable, the borel sigma algebra is sitting inside the lebesgue sigma algebra.

\end{remark}
\defn{Measure}{Let $(\Omega,\Sigma(\Omega))$ be a set and a sigma algebra (aka a double). A function $\mu:\Sigma(\Omega)\to \RR \cup \{+\infty\}$ is said to be a \emph{measure} if:
\begin{enumerate}
    \item $\mu(E)\geq 0$ for all $E \in \Sigma(\Omega)$
    \item $\mu(\varnothing)=0$
    \item $\mu(\cup_{i=1}^{\infty}E_i)=\sum_{i=1}^{\infty} \mu(E_i)$ for a collection of disjoint subsets of $\Sigma(\Omega)$ \end{enumerate}}

\thmp{\textbf{(Limit Exchange)} Let $E_i \uparrow E$, then $\mu(E)=\lim_{i\to \infty}\mu(E_i)$. Likewise, if $E_i \downarrow E$ with $\mu(E_1)<\infty$, then $\mu(E)=\lim_{i\to \infty} \mu(E_i)$ }{The proof follows similarly to the case where $\Sigma$ was lebesgue and $Omega$ was $\RR^d$ (see above). }

\thmp{Limit exchange + finite additivity is equivalent to countable additivity (given other axioms for a measure stay fixed).}{$\impliedby$ Countable additivity takes care of finite additivity, and previous theorem gives limit exchange.
\\\\ $\implies$ Let $E_1,E_2 \cdots $ be disjoint sets in the sigma algebra. We have $\mu(\cup_{i=1}^n E_i)=\sum_{i=1}^n \mu(E_i)$. Let $Q_1=E_1, Q_2=E_1\cup E_2, Q_3=E_1\cup E_2 \cup E_3$ and so on. We have $Q_i \uparrow$. $\cup_{i=1}^n Q_i=\cup_{i=1 }^n E_i$. $\mu(\cup_{i=1}^n Q_i)=\sum_{i=1}^n \mu(E_i)$. $\mu(\cup_i E_i)=\mu(\cup_{i=1}^{\infty} Q_i)=\lim_{n \to \infty} \mu(Q_i)=\sum_{i=1}^{\infty}\mu(E_i)$}

\thmp{A set $E\subseteq \RR^d$ is measurable iff \begin{enumerate}
    \item $E$ differs from a $G_{\delta}$ set by a set of zero measure
    \item $E$ differes from a $F_{\sigma}$ set by a set of zero measure 
\end{enumerate}}{If measurable, then obviously we have for every $n \in \NN$ such that $m(O_n-E)\leq 1/n$ so $\cap_n O_n$ is our desired $G_{\delta}$ set. Likewise, if we perform the same for $E^c$ and get $\cap_n O'_n$ there, then $\cup_n O'^c_n$ is our desired $F_{\sigma} $ set. 
\\\\ If we have $E$ differ from a $G_{\delta}$ set by a set of measure 0, we mean that $E-G$ and $G-E$ are individually measure 0. Note that $E\cap G=G-(G-E)$ which means $E \cap G$ is measurable. Now, $E \cap G \cup (E-G)=E$, which means $E$ is measurable. Same argument applies to an $F_{\sigma}$ set $F$. }

\subsection{A non measurable set in $[0,1]$}
Define the equivalence relation $x \sim y$ if and only if $x-y \in \QQ$. Let $\epsilon_{\alpha}$ be the equivalence classes, so that $[0,1]=\cup_{\alpha} \epsilon_{\alpha}$. Pick $x_{\alpha}\in \epsilon_{\alpha}$ (by axiom of choice). Take these $x_{\alpha}$ to make a set $\N$.
\\\\ Let $\{r_k\}$ be an enumeration of rationals in $[-1,1]$. Define $N_k=N+r_k$ (translate). Note that, if $N_l\cap N_k\neq \varnothing$, then $N+r_l\cap N+r_k \neq \varnothing$ or there exists $x=x_{\alpha}+r_l=x_{\beta}+r_k$, but that means $x_{\alpha}\sim x_{\beta}$, only possible if $\alpha=\beta$ but contradiction to the assumption that $l \neq k$, so for different rationals, $N_k$ is disjoint to $N_j$. Note that $[0,1]\subseteq \cup_{i=1}^{\infty}N_i \subseteq [-1,2]$. Assuming $N$ is measurable, it tells us $N_k $ each are measurable, and yields $1 \leq \sum_{i=1}^{\infty} m(N_i)\leq 4$ but $m(N_k)=m(N)$, which gives us a contradiction. 
\\\\ This set is called the \textbf{Vitali Set}. 

\section{Measuring Functions}
\defn{Measurable Function}{A function $f:\RR^d \to \RR\cup \{-\infty,\infty\}$ is said to be \emph{measurable} if $f^{-1}([-\infty,a))$ is measurable in $\RR^d$.}
\begin{remark}
    Note that, in the above definition, it is easy to see that it is equivalent to saying any function is Lebesgue measurable if it inverse maps borel sets to lebesgue sets. 
    \\ A borel measurable function on the other hand, inverse maps borel sets to borel sets.
\end{remark} 
\defn{Characteristic function of a set $E \subseteq \RR^d$}{$$\chi_{E}(x):=\begin{cases}
 1 \ :x \in E \\ 0 \ :\text{else}   
\end{cases}$$}
We now define the elementary functions that make up Riemann theory:
\defn{Step function}{$f$ is a step function if there exists $N \in \NN$, real numbers $\{a_i\}_{1}^N$ and $N$ rectangles $R_i$ such that $f(x)=\sum_{i=1}^N a_i \chi_{R_i}(x)$}
The elementary functions that make up lebesgue theory on the other hand, are:

\defn{Simple functions}{$f$ is a simple function if there exists $N \in \NN$, $N$ reals $\{a_i\}$ and $N$ measurable sets $\{E_i\}$ such that $f=\sum_{i=1}^N a_i \chi_{E_i}(x)$}

\thmp{Equivalent criteria for measurability of a function:
\begin{enumerate}
    \item $f^{-1}([-\infty,a)) $ is measurable
    \item $f^{-1}([-\infty, a])$ is measurable
    \item $f^{-1}(a,\infty]$ is measurable
    \item $f^{-1}[a,\infty]$ is measurable
\end{enumerate}}{These are rather trivial, given that $[-\infty,a]=\cap_{r_k}[-\infty,a+r_k)$ and $f^{-1}(I^c)=(f^{-1}(I))^c$}
\begin{lemma}
    If $f$ is measurable, then $-f$ is measurable.
\end{lemma}
\thmp{If $f:\RR^d \to \RR\cup\{-\infty,\infty\}$ such that  $f^{-1}(-\infty)$ and $f^{-1}(\infty)$ are measurable, then $f$ is measurable if and only if $f^{-1}(O)$, for all open sets $O\subset \RR\cup \{-\infty,\infty\}$ (order topology).}{$\implies)$ Let $f$ be measurable. Then $f^{-1}(a,b)$ is measurable, and $f^{-1}[-\infty,a)$ and $f^{-1}(a,\infty]$ is also measurable for all $a$. The basis sets are inverse mapped to measurable sets.
\\\\ $\impliedby)$ Let $f^{-1}(O)$ be measurable for all open sets $O$. This means $f^{-1}[-\infty,a)$ is measurable for all finite $a$, as is $f^{-1}[-\infty,a]$. For $f^{-1}[-\infty,\infty)=f^{-1}(\cup_i[-\infty,i])$ }

\thmp{If $f$ is continuous, then $f$ is measurable. If $f$ is finite valued and measurable, and $\phi:\RR\to\RR$ is continuous, then $\phi \circ f$ is measurable.}{(1) Is obvious
\\\\ $(\phi \circ f)^{-1}(-\infty,a)=f^{-1}(\text{an open set})$ which is measurable. }

\defn{Almost everywhere}{We say a property $P(x)$ holds almost everywhere on a measure space $x\in\Omega$ if the set $E \subseteq \Omega:=\{x \in \Omega: P(x)\text{ is not true}\}$ is a set of measure $0$.
\\\\ For example, we say $f \equiv g \ a.e.$ if $\{x: f(x)\neq g(x)\}$ is a set of measure 0.}

\thmp{Let $f_n:E\to \RR\cup\{\pm \infty\}$ be a sequence of measurable functions defined on a measurable set $E$. Then the following functions are measurable: 
\begin{enumerate}
    \item $\sup_n f_n(x)$
    \item $\inf_n f_n(x)$
    \item $\limsup_n f_n(x)$
    \item $\liminf_n f_n(x)$
\end{enumerate}
}{(1) Note that $\{x: \sup_n f_n(x)>a\}$ is the same as $\cup_{n} \{x: f_n(x)>a\}$. To see this, note that if $x$ is such that $\sup_n f_n(x)>a$, that means there is some $n$ so that $f_n(x)>a$. The other direction is just as trivial.
\\\\ (2) $\inf_n f_n(x)=-\sup_n -f_n(x) $.
\\\\ (3) and (4) follow from $\limsup_n f_n(x):= \inf_{n \in \NN} (\sup_{i\geq n+1}f_i(x))$ and $\liminf_n f_n(x):= \sup_{n \in \NN} (\inf_{i\geq n+1}f_i(x))$}
\thmp{If $\{f_n:E \to \RR\cup\{\pm \infty\}\}$ is a sequence of measurable functions such that $E$ is measurable and $f_n\to f$ pointwise, then $f$ is measurable.}{$f(x)=\lim_{n\to\infty} f_n(x)=\limsup_n f_n(x)=\liminf_n f_n(x)$.}

\thmp{If $f$ and $g$ are measurable, then $f^k(x):=f(x)^k$ is measurable, $f+g$ is measurable, and $fg$ is measurable.}{If $k$ is odd, $\{f^k>a\}=\{f>a^{1/k}\}$. If $k$ is even, $\{f^k>a\}$ for negative $a$ is just whole reals, so we take positive $a$, $\{f^k>a\}=\{f>a^{1/k}\}\cup\{f<-a^{1/k}\}$. Measurable. 
\\\\ $\{f+g>a\}=\cup_{r_k} \{f>r_k\}\cap \{g>a-r_k\}$ for rationals $r_k$. Proof is that, if $f+g>a,$ then $f+g>r_k>a$, which yields the result one side. $f>r_k$ and $g>a-r_k$ trivially gives the equality. 
\\\\ $fg=\frac{1}{4}((f+g)^2-(f-g)^2)$}

\thmp{Let $g$ be a measurable function, and $$f\equiv g \ a.e.$$ Then $f$ is measurable.}{$\{f<a\}=\{f<a:f\equiv g\}\cup\{f<a:f \not\equiv g\}$. Note that $\{f<a:f\not\equiv g\}$ is a measure 0 set. So the result holds.}
\subsection{Approximating Measurable Functions}

\thmp{Let $f:\RR^d\to \RR\cup\{+\infty\}$ be measurable and non negative. There exists a sequence of simple functions $\varphi_k$ such that $\varphi_k\leq \varphi_{k+1}$ and $$\varphi_k \to f \ \text{pointwise}$$}{
\textbf{Some commentary:}
\\ We would like to subdivide the range of $f$ and inverse map these to get measurable sets on $\RR^d$, with which we can then make characteristic functions and then simple functions, by taking a sum of the kind: $$\sum_{i=1}^K \inf\{f(x):x \in E_i\} \chi_{E_i} $$ where $E_i$ is one of the measurable sets we get from inverse maps. 
\\\\ But the issue with this is that, the range may not be a bounded set. To mitigate this issue, we create a sequence of bounded functions that converge pointwise to $f,$ and then approximate these functions, and take the diagonal sequence.
\\\\ \textbf{End of commentary.}
\\\\ Let $N$ be a natural number and $Q_N$ be the $N$ sided cube centered at origin. $$F_N:=\begin{cases}
    f(x)\ :x \in Q_N, f(x)<N \\ N\ :x \in Q_N, f(x) \geq N \\ 0 \ \text{else}

\end{cases}$$ 
$F_N\to f$ pointwise as $N \to \infty$.
The range of $F_N$ is $[0,N]$. For $k \in \NN$, subdivide $[0,N]$ into $2^k N$ parts, i.e, subintervals $[0,1/2^k],[1/2^k,2/2^k],\cdots [l/2^k,(l+1)/2^k] \cdots [N-1/2^k,N]$. Now take the inverse image of each of these, to get measurable sets $$E_{l,N,2^k}=F_N^{-1}[l/2^k,(l+1)/2^k] $$

Define $$\phi_{N,2^k}=\sum_l \frac{l}{2^k} \chi_{E_{l,N,2^k}}=\sum_l \frac{l}{2^k} \chi_{F_N^{-1}[l/2^k,(l+1)/2^k]}$$

Note that, $|F_N(x)-\phi_{N,2^k}(x)|\leq 1/2^k$ for all $x$. So $\phi_{N,2^k} \to F_N$ (for fixed $N$) uniformly.

The sequence $\phi_{2^k,2^k}$ ($N=2^k$) is monotonic non decreasing by virtue of the subdivision becoming finer, and $\phi_{2^k}:=\phi_{2^k,2^k}\to f$ pointwise. Hence, we are done.

}

\begin{remark} (\textbf{Previous result strenghtens to "uniform convergence" if $f$ were bounded})
    Note that, in the previous case, if $f$ were bounded, we would get that the convergence $\phi_k\to f$ would be uniform, from the fact that $\phi_{N,2^k}\to F_N$ was uniform. We needn't have to "pass" to a sequence of bounded functions that approximate $f$ in the first place.
\end{remark}

\thmp{If $f$ is measurable on $\RR^d$, there exists a sequence of simple functions $\phi_k$ such that $\phi_k \to f$ pointwise and $|\phi_k|\leq |\phi_{k+1}|$.}{Let $f^+(x):=\max(f(x),0)$ and $f^-(x):=\max(-f(x),0)$. Note that $f\equiv f^+-f^-$. Both $f^+$ and $f^-$ are non decreasing. We can make $$F^+_N:=\begin{cases}
    f^+(x) \ :x \in Q_N, f^+(x)<N \\
    N \ :x \in Q_N, f^+(x)\geq N\\
    0\ \text{else}
\end{cases}$$ 
and 
$$F^-_N:=\begin{cases}
    f^-(x) \ :x \in Q_N, f^-(x)<N \\
    N \ :x \in Q_N, f^-(x)\geq N\\
    0\ \text{else}
\end{cases}$$
We note the following property of $f^+$ and $f^-$, which is that, whenever $f^+$ is positive, $f^-$ is 0, and likewise whenever $f^-$ is positive, $f^+$ is 0. Likewise, since $F_N^+$ and $F_N^-$ are just constraints on $f^+$ and $f^-$, they too obey the same property. 

We then define $$\phi^+_{N,2^k}(x)=\sum_l l/2^k \chi_{(F_N^+)^{-1}(l/2^k,l+1/2^k]}(x) $$
and 
$$\phi^-_{N,2^k}(x)=\sum_l l/2^k \chi_{(F_N^-)^{-1}(l/2^k,l+1/2^k]}(x) $$

$\phi^{\pm}_{N,2^k}\to F_N^{\pm}$ respectively (uniform).
Note that, if $\phi^+_{N,2^k}$ is positive, that means that for some $l$, $F_N^{+}\in (l/2^k],$ implying that $F_N^-$ is zero. Therefore, the same property that $f$ follows, is followed by $\phi^+_{N,2^k}$ and $\phi^-_{N,2^k}$. For such functions, note that $|f|=f^++f^-$. Therefore, $|\phi_{k}|=|\phi_{2^k,2^k}|=|\phi^+_{2^k,2^k}-\phi^-_{2^k,2^k}|=\phi^+_{2^k,2^k}+\phi^{-}_{2^k,2^k}$. We are done.
}
\thmp{Let $f$ be a measurable function on $\RR^d$. There exists a sequence of \textbf{step functions} $\phi_k$ such that $\phi_k \to f$ a.e. }{It suffices to show that $\chi_E$ for a measurable set $E$ of finite measure can be approximated by step functions, from the previous theorem (We took the simple function's characterists to be from finite measure sets). For a given $k$, there exists $F_k=\cup_{i=1}^{n_k} Q_{i,k}$ a closed set that is a union of almost disjoint closed cubes $Q_{i,k}$ such that $m(E\triangle F_k)\leq 1/2(2^k)$.. Take smaller cubes $S_{i,k}\subset Q_{i,k}$ so that they are closed, of very close volume to $Q_{i,k}$ but strictly inside $Q_{i,k}$. In such a case, we then have a disjoint collection of finite closed cubes such that $m(E\triangle G_k)\leq 1/2^k$. We then consider $$\phi_k:=\chi_{G_k}=\sum_{i,k} \chi_{S_{i,k}}$$ This function is the same as $\chi_{E}$ everywhere except a set $E \triangle G_k$ whose measure is $m(E \triangle G_k)<1/2^k$. Let $F_k=\cup_{k+1}^{\infty}E\triangle G_i$ and $F=\cap_k F_k$. Note that $m(F)\leq m(F_K)\leq \sum_{K+1}^{\infty}1/2^k \leq 1/2^{K}$. So $m(F)=0$. On the comlpement of $F$, i.e, $\cup_k F_k^c$ which is $\cup_k(\cap_{k+1}^{\infty}(E\triangle G_i)^c)$ on which convergence happens.   }

\subsection{Littlewood's Three Principles}
\begin{enumerate}
\item Every measurable set is "almost" a union of finite intervals.
\item Every measurable function is "almost" continuous.
\item Every sequence of measurable functions that converges pointwise, "almost" does so uniformly.
  
\end{enumerate}

The precise formulation of these are:
\begin{theorem}
    {Given $\varepsilon>0$ and a measurable set $E$ of finite measure, we can find $F=\cup_{i=1}^K Q_i$ a union of closed cubes such that $m(E\triangle F)\leq \varepsilon$}
\end{theorem}
\thmp{\textbf{(Egorov)} Let $f_k$ be a sequence of measurable functions defined on a measurable set $E$ ($m(E)<\infty$), converging to $f$ pointwise. Given $\varepsilon>0$, there exists a closed set $A_{\varepsilon}\subset E$ such that $m(E-A_{\varepsilon})<\varepsilon$ and $f_k\to f$ uniformly on $A_{\varepsilon}$.}{Define $$E^n_k:=\{x\in E:|f_j(x)-f(x)|<1/n \ \forall \ j \geq k\}$$ These sets are measurable (since $|\cdot|$ is measurable and differences are measurable). Note that for a fixed $n$, $E^n_{k}\subseteq E^n_{k+1}$ and these sets ultimately converge to $E$ itself since for any $x$ in $E$, and for a given $1/n$ there exists $k$ such that $|f_j(x)-f(x)|<1/n$ for all $j>k$. From limit exchange, $m(E)=\lim_{k \to \infty} m(E^n_k)<\infty$. Therefore, for any $n,$ there exists $n_k$ so that $m(E-E^n_{k_n})=m(E)-m(E^n_{k_n})<1/2^n$. We then have, $$|f_j(x)-f(x)|<1/n \text{ whenever } j>k_n \text{ and }x \in E^n_{k_n}$$ 
Let $N$ be so that $\sum_N^{\infty} 1/2^n \leq \varepsilon/2$ (for some given $\varepsilon$). Consider $$F_{\varepsilon}=\cap_N^{\infty} E^n_{k_n}$$

$E-F_{\varepsilon} \subseteq \cup_{N}^{\infty}E-E^n_{k_n} $ which gives $$m(E-F_{\varepsilon})\leq \varepsilon/2$$

Let $\delta>0$, choose $n \geq N$ so that $1/n\leq \delta$. Suppose $x \in F_{\varepsilon}$. This implies $x\in \cap_{N}^{\infty} E^n_{k_n}$ which means that $$|f_j(x)-f(x)|<1/n\leq \delta \text{ whenever }j\geq k_n$$ which means that we have uniformity on $F_{\varepsilon}$. Now we pass to a smaller closed set $A_{\varepsilon}\subseteq F_{\varepsilon}$ so that $m(F_{\varepsilon}-A_{\varepsilon})\leq \varepsilon$, and on $A_{\varepsilon}$ convergence is uniform.
}
\thmp{\textbf{(Lusin)} Let $f:E\to \RR$ be a finite valued, measurable function defined on a set of finite measure $E$. For all $\varepsilon>0$ there exists a closed set $A_{\varepsilon}$ so that $m(E-A_{\varepsilon})<\varepsilon$ and $f|_{A_{\varepsilon}}$ is continuous. }{
\textbf{Note that, this \emph{does not state that} $f$ is continuous on the set $A_{\varepsilon}$ but simply that when $f$ is viewed as a function on $A_{\varepsilon}$, it is continuous.}
\\\\ Let $f_n$ be a sequence of step functions such that $f_n \to f$ pointwise $a.e.$ We shall assume that the convergence happens on $E$ itself, since the remainder set is of measure 0 anyways. For $f_n$, we can remove a set $E_n$ from the domain to make $f_n$ continuous (This can be done since step functions, defined on $\RR^d$, are discontinuous on the $d-1$ dimensioned subspaces that are the boundaries of each rectangle on which they are defined. We can remove a finite number of small rectangles containing each of these subspaces) such that $m(E_n)\leq 1/2^n$. Let $N$ be such that $\sum_{N}^{\infty}1/2^n\leq\varepsilon/2$ (for some given $\varepsilon$).
We look at $$F_N=\cup_{N}^{\infty}E_n \text{ such that }m(E-F_N)=m(E-\cup_{N}^{\infty}E_n)=m(E)-m(\cup_N^{\infty}E_n)\geq m(E)-\varepsilon/2$$
Let $G_N=E-F_N$, our set of consideration for a given $\varepsilon$. We then have $m(E-G_N)\leq \varepsilon/2$, and on $G_N$, which is $E-F_N$, all $f_n$ after $N$ are continuous. From Egorov, we have a set $A_{\varepsilon/2}\subset G_N$ so that $m(G_N-A_{\varepsilon/2})\leq \varepsilon/2$ and $f_n$ beyond $N$ are uniformly convergent to $f$. $m(E-A_{\varepsilon/2})=m(E-G_N)+m(G_N-A_{\varepsilon/2})\leq \varepsilon$. So for a given $\varepsilon>0$, we have a closed set $A_{\varepsilon/2}$ so that $f_n$ beyond a certain $N_{\varepsilon}$ converges uniformly on $A_{\varepsilon/2}$, and $f_n$ are all continuous on $A_{\varepsilon/2}$. Therefore, on $A_{\varepsilon/2}$ the uniform limit $f$ of the sequence of continuous functions is continuous on $A_{\varepsilon}$. \textbf{(See next Lemma)} 
}
\lemp{\textbf{(Throwaway)} If $f_n:(X,d)\to \RR$ is a sequence of continuous functions such that $f_n \to f$ uniformly, then $f$ is continuous.}{Let $x\in X$ and $\varepsilon>$. We want a $\delta>0$ such that $|f(x)-f(z)|<\varepsilon$ whenever $z \in B_{\delta}(x)$. Note that $|f_n(x)-f(x)|<\varepsilon/3$ and $|f_n(z)-f(z)|<\varepsilon/3$ whenever $n \geq N_{\varepsilon}$, and there is a $\delta_0$ so that $|f_n(x)-f_n(z)|<\varepsilon/3$ whenever $z\in B_{\delta}(x)$. Consider $|f(x)-f(z)|=|f(x)-f_n(x)+f_n(x)-f_n(z)+f_n(z)-f(z)|\leq |f_n(x)-f(x)|+|f_n(x)-f_n(z)|+|f_n(z)-f(z)|\leq \varepsilon$ whenever $n \geq N_{\varepsilon}$, and $z \in B_{\delta}(x)$. We have found our $\delta$. Hence, $f$ is continuous. }
\lemp{(\textbf{Borel-Cantelli Lemma}) Let $E_1,E_2,\cdots $ be a collection of measurable sets such that $$\sum_{i=1}^{\infty}m(E_i)<\infty $$ then $\limsup(E_i):=\cap_{n \in \NN}\cup_{i\geq n}E_i$ is measurable and is of measure 0.}{We know that $m(E_i)\to 0$ from convergence of the series. Since the series converges, we can make $\sum_{i=N+1}^{\infty} m(E_i)$ arbitrarily small for large enough $N$. Therefore, for a given $\varepsilon, $ there exists $N$ such that $$m(\cup_{i=N+1}^{\infty}E_i)\leq \sum_{i=N+1}^{\infty}m(E_i)\leq \varepsilon $$
Since the $\limsup$ is smaller than the left side above for every $N$, we have that $m(\limsup(E_i))=0$.}


\section{Integration}
\subsection{Simple Functions}
\defn{Canonical form of a simple function}{We say $\phi$, a simple function, is in canonical form if $$ \phi=\sum_{i=1}^N a_i \chi_{E_i}$$ where $\{a_i\}$ are distinct constants and $\{E_i\}$ are disjoint. }
\lemp{Canonical form for a function always exists, and is unique.}{Let $c_1,c_2 \cdots c_r$ be the finite values $\phi$ takes. Let $E_i:=\{x\in \RR^d: \phi(x)=c_i\}$. We then can conclude $\phi=\sum_{i=1}^N c_i \chi_{E_i}$.
\\ As for uniqueness, if a function were to have two different canonical forms, it is easy to see why they would necessarily have to disagree on some point on $\RR^d$. }
\defn{Lebesgue integral of a simple function}{If $\varphi$ is a simple function \emph{in canonical form}, then $$\int_{\RR^d} \varphi=\int_{\RR^d} (\sum_{i=1}^N a_i \chi_{E_i}):=\sum_{i=1}^N a_i m(E_i)$$}
\thmp{If $\varphi$ is a simple function, the following holds:
\begin{enumerate}
    \item If $\varphi=\sum_{i=1}^N a_i \chi_{E_i}$, then $\int \varphi=\sum_{i=1}^N a_i m(E_i)$ regardless of whether the representation is canonical or not.
    \item If $\varphi$ and $\psi$ are two simple functions, then $\int a\varphi +b\psi=a\int \varphi +b \int \psi$.
    \item If $f\leq g$ where $f$ and $g$ are simple functions, then $\int f \leq \int g$.
    \item $|\int f| \leq \int |f|$ for simple function $f$.
    \item If $E$ and $F$ are disjoint measurable sets, then $\int_{E \cup F} f=\int_E f+\int_F f$.
\end{enumerate}}{(1) First, let us assume that $E_i$ are all disjoint, but $a_i$ may not be distinct in $\phi=\sum_{i=1}^N a_i \chi_{E_i}$. Let $E_0:=\{a_n: n\leq N\}$ as a set (distinct elements). Consider $a \in E_0$, and let $E_a$ be $\cup E_i$ such that, that particular $a$ corresponds to $E_i$. We then see that $\sum_{a \in E_0} a E_a$ is the canonical form of $\phi$, and $\int \phi=\sum_{a \in E_0} a m(E_a)=\sum_{a \in E_0} a (\sum_{\text{times }a\text{ occurs as }a_i }m(E_i) )$ which clearly is $\sum_{i=1}^N a_i m(E_i)$. 
\\\\ Now, let us assume that $E_i$ need not be disjoint. We can find disjoint $E'_j$-s such that $\cup_{j=1}^M E'_j=\cup_{i=1}^N E_i$, and $E_i=\cup_{j: E'_j \subset E_i}E'_j$. Let $a'_j:=\sum_{k: E'_j \subseteq E_k}a_k$. Therefore, we can see that $\phi=\sum_{j}a'_j \chi_{E'_j}$ (Since $\sum_{j=1}^M a'_j \chi_{E'_j}=\sum_{j=1}^M (\sum_{k: E'_j \subset E_k}a_k)\chi_{E'_j}$) where $E'_j$ are disjoint. $\int \phi=\sum_{i=1}^M \sum_{(k:E'_j\subset E_k)}a_k m(E'_j)=\sum_{i=1}^N a_i m(E_i)$. 
\\\\ (2) If $f=\sum_i a_i \chi_{E_i}$ and $g=\sum_i b_i \chi_{F_i}$, then we note that $af+bg$ is also a simple function, whence this property falls immediately.
\\\\ (3) If $f \leq g$, $g-f\geq 0$ and $g-f$ is a simple function which is nonnegative, which means their canonical forms have nonnegative coefficients. Hence, $\int (g-f)=\int g -\int f \geq 0$
\\\\ (4) Let $f=\sum_i a_i \chi_{E_i}$ in canonical form. Hence, $|f|=\sum_i |a_i| \chi_{E_i}$. $|\int f|=|\sum_i a_i m(E_i)|\leq \sum_i |a_i|m(E_i)=\int |f|$
\\\\ (5) $\int_{E\cup F} f$ for disjoint $E$ and $F$ is $\int f \chi_{E\cup F}=\int f \chi_E+\int f\chi_F$ which yields the result. 

}
\lemp{If $f$ and $g$ agree a.e. and they are simple functions, then $\int f=\int g$.}{To see this, note that $f$ and $g$ possibly disagree on a set $E$ of measure $0$. Which means $f-g$ is zero almost everywhere. i.e, $f-g=\sum_{i=1}^N a_i \chi_{E_i}$ where each $E_i$ are disjoint and measure 0. Therefore, $\int f-g=0$ or $\int f=\int g$. }

\subsection{Bounded functions supported by sets of finite measure}
\defn{Support of a measurable function $\mathbf{f}$}{$$supp(f):=\{x \in \RR^d: f(x) \neq 0\}$$}
Since $f$ is measurable, $f^{-1}(\RR\cup\{\pm \infty\}-\{0\})$, or rather, the support, is also measurable. 
\thmp{
    If $f$ is a bounded function (bounded by $M$) which is finitely supported by $E$, then there exists a sequence of simple functions $\phi_k$, each of which is bounded by $M$, and is supported in $E$, and $$\phi_k \to f $$
}{$\phi_k:=\sum_l l/2^k \chi_{f^{-1}(l/2^k,l+1/2^k]} $ from an earlier proof. Note that there, we could generate a sequence of functions such that $|\phi_k|\leq |\phi_{k+1}|$ and $\phi_k \to f$ pointwise. Therefore, all $\phi_k$ are uniformly bounded by $M$ and converge pointwise to $f$. Note that outside $E$, $f$ is $0$, and $|\phi_k|\leq |\phi_{k+1}| \cdots$, and on $x \in E^c$, $|\phi_k(x)|\to 0$ which means that $|\phi_k(x)|=0$, therefore, $\phi_k$ are supported inside $E$. }
\lemp{Let $f$ be a function that is finitely supported on $E$ and bounded by $M$. Let $\phi_k$ be a sequence of simple functions, finitely supported on $E$ and uniformly bounded by $N$, and that $$\phi_k(x) \to f(x) \ a.e. $$ then, \begin{enumerate}
    \item $\lim_{n\to \infty} \int \phi_n $ exists
    \item If $f \equiv 0 \ a.e.$ then $\lim_{n \to \infty} \int \phi_k=0$
\end{enumerate}}{From Egorov, for a given $\varepsilon$, there exists $A_{\epsilon}\subseteq E$ such that $m(E-A_{\varepsilon})<\varepsilon$ and on $A_{\varepsilon}$, $\phi \to f$ is uniform. $|\int \phi_n-\phi_m|\leq \int_{A_{\varepsilon}} |\phi_n-\phi_m|+\int_{E-A_{\varepsilon}}|\phi_n-\phi_m|\leq  $ $\int_{A_{\varepsilon}}|\phi_n-\phi_m|+2M\varepsilon $ (since $|\phi_m-\phi_n|$ is bounded by $2M$). This is in turn less than $$m(E)\varepsilon+2M\varepsilon $$ for large enough $m,n$ since convergence is uniform in $A_{\varepsilon}$. Hence, we are done.
\\\\ For the 2nd part, note that $|\int \phi_k|\leq \int |\phi_k|=\int_{A_{\varepsilon}}|\phi_k|+\int_{E-A_{\varepsilon}}|\phi_k|$ which is less than or equal to $\varepsilon m(E)+2M\varepsilon$, but since $m(E)=0$, we have the requisite result.  }
\defn{Lebesgue integral for bonded funtions on finite measure support}{Let $f$ be bounded by $M$ and $m(supp(f)=E)<\infty$. If $phi_k$ is a sequence of simple functions, bounded by $M$, supported on $E$, and $\phi_k \to f\ a.e.$ Then $$\int f:=\lim_{n\to\infty}\int\phi_n$$ }
\lemp{This definition makes sense, i.e. if $\phi_i$ and $\psi_i$ are two sequences of simple functions converging to $f$, supported on $E$ and bounded by $M$, then $$\lim_{n\to \infty}\int\phi_n=\lim_{n\to\infty}\int\psi_n $$}{We know $\phi_n \to f$ and $\psi_n \to f$, which means $\phi_n-\psi_n\to 0$, and $\phi_n-\psi_n$ is a sequence of simple functions bounded by $2M$, and converges to $0$ almost everywhere. $\varepsilon>0$ gives $\int_{A_{\varepsilon}} |\phi_n-\psi_n|+\int_{E-A_{\varepsilon}}|\phi_n-\psi_n|\leq \varepsilon m(E)+ 2M \varepsilon$ (from Egorov and uniform convergence) hence $\lim_{n\to \infty}\int|\phi_n-\psi_n|=0 $ or $$ \lim_{n\to \infty} \int\phi_n=\lim_{n\to \infty}\int\psi_n$$

}

\thmp{Suppose $f$ and $g$ are bounded functions supported by a set of finite measure, then the following hold:
\begin{enumerate}
    \item (\textbf{Linearity}) $\int af+bg=a\int f+b\int g$
    \item  (\textbf{Additivity}) If $E$ and $F$ are disjoint, then $\int_{E \cup F} f=\int_E f +\int_F f$
    \item (\textbf{Monotonicity}) 
    $\int f \leq \int g$ whenever $f\leq g$
    \item (\textbf{Triangle}) $|\int f|\leq \int |f|$
\end{enumerate}}{(1) $f=\lim_{n\to \infty} \phi_n$ and $g=\lim_{n\to\infty} \psi_n$, and $af+bg=\lim_{n\to\infty} (a\phi_n+b\psi_n)$, where $a\phi_n+b\psi_n$ is bounded, and is supported on $E$. Hence, $\int af+bg=\lim_{n\to\infty}\int a\phi_n+b\psi_n=a\int f+b \int g$
\\\\ (2) $E$ and $F$ are disjoint, so $\chi_{E\cup F}=\chi_E+\chi_F$, which would yield the result.
\\\\ (3) If $f\leq g,$ then $g-f\geq 0$, so the sequence of simple functions converging to $g-f$, would also be each non-negative, which means $\lim_{n\to\infty} \phi_n\geq 0$ which yields the result.
\\\\ (4) Let $\phi_n \to f$ be a sequence of simple functions uniformly bounded and supported on the support of $f$. $|\lim_{n\to\infty} \int \phi_n|=\lim_{n\to\infty}|\int \phi_n|\leq \lim_{n\to\infty} \int|\phi_n|$ (notice that in the canonical form of $\phi_n \to f$, we get $|\phi_n|\to||f|$) which yields $|\int f|\leq \int|f|$. }
\thmp{(\textbf{Bounded Convergence}) Let $f_n$ be a sequence of functions uniformly bounded by $M$, and each supported on a set $E$ of finite measure. Suppose $f_n\to f \ a.e$ (pointwise), $f$ is itself bounded by $M$, is supported on $E$ and $$\int|f_n-f|\underset{n\to\infty}{
\to} 0 $$ }{Let $\varepsilon>0$. Consider $A_{\varepsilon}$ from Egorov such that $f_n\twoheadrightarrow f$ and $m(E-A_{\varepsilon})<\varepsilon$. Look at $\int|f_n-f|=\int_{A_{\varepsilon}}|f_n-f|+\int_{E-A_{\varepsilon}}|f_n-f|\leq \int_{A_{\varepsilon}}|f_n-f|+2M\varepsilon$, and for large enough $n$ (since inside $A_{\varepsilon}$ convergence is uniform) we have $|f_n-f|<\varepsilon$ for large enough $n$ for all $x$ (uniformly) which gives us $\int |f_n-f|<\varepsilon$ for large enough $N$, which means $\int|f_n-f|\to 0$. In other words: For a convergent sequence of uniformly bounded functions on the same support of finite measure, $$\mathbf{\int \lim_{n\to\infty} f_n=\lim_{n\to\infty}\int f_n} $$ 

}
\lemp{If $f\geq 0$, is bounded with its support $E$ being of finite measure and $\int f=0$, then $f=0$ almost everywhere}{Conider $E_k:=\{x: f(x)\geq 1/k \}$. Note that $1/k \chi_{E_k}\leq f \implies 1/k m(E_k) \leq \int f=0 $ For every $k$, $m(E_k)=0$, and this sequence is increasing. Therefore, $\cup_n E_n=\{x:f(x)>0\}$ is of measure $0$. Hence, $f=0$ almost everywhere. }
\subsection{$\S$ Appendix: Riemann Integrable functions}
\defn{Partition}{A partition $P$ of an interval $[a,b]$ is a collection of points $t_0,t_1,t_2,\cdots t_{P_k}$ such that $a=t_0<t_1<t_2 \cdots t_{P_{k}-1}< t_{P_k}=b$
\\\\ Given a partition, we define $I_j$, the $j$th interval of the partition as $[t_{j-1},t_j]$
}
\defn{Upper and Lower Riemann Sum, given a Partition}{Let $f$ be a \emph{\textbf{Bounded}} function defined on a closed and bounded interval $[a,b]$, and $P$ be a given partition of $[a,b]$. We define $$\mathscr{L}(P,f):=\sum_{j=1}^{P_k}\inf_{x \in I_j}\{f(x)\}|I_j|$$ and $$\U(P,f):=\sum_{j=1}^{P_k}\sup_{x \in I_j}\{f(x)\}|I_j| $$}
\defn{$P'$, the refinement of $P$}{Let $P$ be a partition, $a=t_0< t_1<t_2 \cdots t_{P_{k}-1}<t_{P_k}=b$. We say $P'$ is a refinement if, $P'\subseteq P$ in the sense that $P'=$ $a=u_0<u_1<\cdots u_{P'_k-1}<u_{P'_k}=b$ where a subsequence of $u_j$ is $t_j$}
\defn{Riemann Integrability}{We say a bounded function $f$ defined on $[a,b]$ is riemann integrable if for every $\varepsilon>0$, there exists a partition such that $$\mathscr{L}(P,f)-\mathscr{U}(P,f)<\varepsilon $$ }
\defn{(Alternate) Riemann Integrability}{We say a bounded function $f$ defined on $[a,b]$ is Riemann integrable if $$\sup_{P} \mathscr{U}(P,f)=\inf_{P} \mathscr{L}(P,f)$$}
\thmp{These two definitions are equivalent}{$\implies)$ Let $f$ be Riemann Integrable in the sense that, given $\varepsilon>0$, there exists partition such that $\mathscr{L}(P,f)-\U(P,f)<\varepsilon$. Note that, for any refinement $P'$ of $P$, $\U(P,f)\leq U(P',f)$ and $\mathscr{L}(P',f)\leq \mathscr{L}(P,f)$. Also note that, given any two partitions $P_1$ and $P_2$, we have $$\mathscr{L}(P_2,f)\geq \mathscr{U}(P_1,f) $$ To see this, take a common refinement of $P_1$ and $P_2$, namely $P'$ such that $\mathscr{U}(P_1,f)\leq \mathscr{U}(P',f)$ and $\mathscr{L}(P',f)\leq \mathscr{L}(P_2,f)$. Together with $\U(P',f)\leq \mathscr{L}(P',f)$, we get the desired result.
\\\\ Therefore, we have that $$\sup_{P}\mathscr{U}(P,f)\leq \inf_P \mathscr{L}(P,f)$$ Note that, the 1st definition intuitively speaks to how we can make the upper and lower sum arbitrarily close to each other, which speaks to the 2nd definition, which is that, the supremum and infimum resp. can be bought close together arbitrarily. Hence, the equality falls.
\\\\ $\impliedby)$ 
}

\end{document}